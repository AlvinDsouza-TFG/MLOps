resources:
- repo: self

queue:
  name: Hosted Ubuntu 1604

variables:
- group: mlops-aml-vg

steps:
  - task: Docker@2
    displayName: Build and Push
    inputs:
      command: buildAndPush
      containerRegistry: '$(ACR_SERVICE_CONNECTION)'
      repository: '$(IMAGE_NAME)'
      tags: 'latest'
      buildContext: '$(Build.SourcesDirectory)' 
      dockerFile: '$(Build.SourcesDirectory)/mlops_pipelines/AzureMLDocker/Dockerfile'
